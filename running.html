<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>home page</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<link rel="stylesheet" href="pages.css">
</head>
<body class ="running-page">               
    <div class ="page-wrapper">
       <nav class="navbar">

    <div id="logo">
        <a href="home.html" id ="logoLink"> <h1 id ="m">M</h1> <h1 id = "d">D</h1> </a>
    </div>

    <ul class="nav-links">
        <li><a href="home.html">Home</a></li>
        <li><a href="about.html">About</a></li>
         <li><a href="Michaels-Amazing-website/.qodo/other-stuff/resume.pdf" target="_blank">Resume</a></li>
         <li> <a href ="running.html" id ="active">Running</a> </li>
        <li><a href="contact.html">Contact</a></li>
       

    </ul>

</nav>

<h1 style="text-align: center; font-size: 70px; margin-top: -2px; text-shadow: 4px 4px 12px #4b0082;">Running stats/ fun facts</h1> 
<hr style="height:3px; background-color:rgb(255, 255, 255);width: 100%; margin-top: -30px;">

<h1 style="text-align: center; font-size: 70px; margin-top: -2px; text-shadow: 4px 4px 12px #4b0082;">Highschool stats</h1> 
<ul style="list-style: none; margin-top: -20px;">
  <li><span style="font-size: 60px; text-shadow: 3px 3px 10px #4b0082;">Total miles run:</span><span style="font-size: 30px; font-family: 'Press Start 2P'; text-shadow: 2px 2px 8px #4b0082;"> probably well over 5,000 so a lot</span></li>

  <li><span style="font-size: 60px; text-shadow: 3px 3px 10px #4b0082;">Personal bests:</span><span style="font-size: 15.4px; font-family: 'Press Start 2P'; text-shadow: 2px 2px 8px #4b0082;"> 1 mile – 4:42 | 5K – 16:17 | 800 - 2:05 | 2 mile - 10:06 | 400 - 57 </span></li>

  <li><span style="font-size: 60px; text-shadow: 3px 3px 10px #4b0082;">Races completed: </span><span style="font-size: 16.8px; font-family: 'Press Start 2P'; text-shadow: 2px 2px 8px #4b0082;"> 60+ meets across track and cross country and 3 turkey trots</span></li>

  <li><span style="font-size: 60px; text-shadow: 3px 3px 10px #4b0082;">Awards:</span><span style="font-size: 17px; font-family: 'Press Start 2P'; text-shadow: 2px 2px 8px #4b0082;"> all district,all conference,academic all state, and turkey trot winner</span></li>

  <li><span style="font-size: 60px; text-shadow: 3px 3px 10px #4b0082;">Fun fact:</span><span style="font-size: 29px; font-family: 'Press Start 2P'; text-shadow: 2px 2px 8px #4b0082;"> favorite pre race food is some cheerios</span></li>
</ul>

<hr style="height:3px; background-color:rgb(255, 255, 255);width: 100%; margin-top: -20px;">

<h1 style="text-align: center; font-size: 70px; margin-top: -2px; text-shadow: 4px 4px 12px #4b0082;">College stats</h1> 
<ul style="list-style: none; margin-top: -20px">
  <li><span style="font-size: 60px; text-shadow: 3px 3px 10px #4b0082;">Total miles run:</span><span style="font-size: 24px; font-family: 'Press Start 2P'; text-shadow: 2px 2px 8px #4b0082;"> around 800 in the past 3 and a half months</span></li>

  <li><span style="font-size: 60px; text-shadow: 3px 3px 10px #4b0082;">Personal bests:</span><span style="font-size: 16.2px; font-family: 'Press Start 2P'; text-shadow: 2px 2px 8px #4b0082;"> 3k – 9:09 | 4 mile – 21:15 | 8k - 26:26 | 5k - 15:50( during 8k)</span></li>

  <li><span style="font-size: 60px; text-shadow: 3px 3px 10px #4b0082;">Races completed:</span><span style="font-size: 31.5px; font-family: 'Press Start 2P'; text-shadow: 2px 2px 8px #4b0082;"> 5 races including a time trial</span></li>

  <li><span style="font-size: 60px; text-shadow: 3px 3px 10px #4b0082;">Awards:</span><span style="font-size: 20px; font-family: 'Press Start 2P'; text-shadow: 2px 2px 8px #4b0082;"> unfortunately none right now but will change soon hopefully</span></li>

  <li><span style="font-size: 60px; text-shadow: 3px 3px 10px #4b0082;">Fun fact:</span><span style="font-size: 20.5px; font-family: 'Press Start 2P'; text-shadow: 2px 2px 8px #4b0082;"> the best workout I had all year I did on 2 hours of sleep</span></li>
</ul>

<hr style="height:3px; background-color:rgb(255, 255, 255);width: 100%; margin-top: -20px;">

<h1 style="text-align: center; font-size: 70px; margin-top: -2px; text-shadow: 4px 4px 12px #4b0082;">Running game</h1>

  <div id="run-track" style="display:flex; max-width: 100vb; height: 150px;">
    <img id="stickman" 
         src="images/stickman_running__animation__by_nikikunartz_dfmuk0k-pre-Picsart-BackgroundRemover.jpg"
         alt="Running stickman"
         style="height: 150px; width: 200px; position: absolute; right:90.7%;">

    <img id="finishFlag"
         src="images/finish-flag-icon-finish-line-success-concept-finish-banner-speed-flag-competition-sport-race-flag-symbol-start-and-winner-finish-banner-racing-grunge-flag-tire-track-checker-marks-runners-sport-free-vector-Photoroo.png"
         alt="Finish line"
         style="height: 150px; width: 71px; position: absolute; left:95.5%;">
</div>

    <img src ="images/grassy-landscape-grassy-field-free-vector-Photoroom.png"alt="Grassy field" style="height: 100px; width:100%; margin-top:-95px;">
    <input type="number" id="pace" placeholder="Enter pace (mph)" min="1" max="30">
<button class="start-run" style="background-color: red; width: 100px; font-size: 1.5rem; border: 2px solid black; cursor: pointer;">Run!</button>
<script>

(function () {
  // Prevent multiple concurrent runs
  let running = false;
  let resetTimer = null;

  document.querySelector(".start-run").addEventListener("click", function () {
    // if a run is in progress ignore additional clicks
    if (running) return;

    // Grab DOM elements (must exist in your HTML)
    const stickman = document.getElementById("stickman");
    const track = document.getElementById("run-track");
    const paceInput = document.getElementById("pace");
    const finishFlag = document.getElementById("finishFlag");

    // Basic existence checks
    if (!stickman || !track || !paceInput || !finishFlag) {
      console.error("Required element missing: stickman / run-track / pace / finishFlag");
      return;
    }

    // Parse and validate MPH
    const mph = Number(paceInput.value);
    if (!mph || mph < 1 || mph > 30) {
      alert("Enter a speed between 1 and 30 mph!");
      return;
    }

    running = true; // mark as running

    // === Save original inline state so we can restore it exactly ===
    const original = {
      src: stickman.src,
      left: stickman.style.left,
      right: stickman.style.right,
      top: stickman.style.top,
      position: stickman.style.position,
      height: stickman.style.height,
      width: stickman.style.width,
      transition: stickman.style.transition
    };

    // If the element has offset values, capture those too (pixel sizes)
    const origRect = stickman.getBoundingClientRect();
    const origPixelHeight = Math.round(origRect.height) || null;
    const origPixelWidth = Math.round(origRect.width) || null;

    // Path to running GIF (update if your file name is different)
    const RUNNING_SRC = "images/ZbLj-unscreen.gif";

    // === Force the running GIF and keep same visual size ===
    stickman.src = RUNNING_SRC;

    // If original pixel size available, lock the running image to the same pixel size
    stickman.style.height = "300px";   // ← adjust height
    stickman.style.width  = "200px";   // ← adjust width 

    // We'll animate "left" in pixels. Clear any inline "right" that conflicts.
    stickman.style.right = ""; // clear right so left takes effect
    // Ensure element is positioned absolutely so left/top work (this overrides inline position but we will restore it)
    stickman.style.position = "absolute";

   const RUNNING_TOP_CORRECTION_PX = -70; // <-- change this number to move stickman up/down
if (original.top) {
    const origTopPx = parseFloat(original.top) || stickman.offsetTop;
    stickman.style.top = (origTopPx + RUNNING_TOP_CORRECTION_PX) + "px";
} else {
    stickman.style.top = (stickman.offsetTop + RUNNING_TOP_CORRECTION_PX) + "px";
}

    // compute animationTime from mph
    const animationTime = 15 / mph + 0.5; // seconds (same formula you used)

    // Get bounding rects relative to viewport
    const trackRect = track.getBoundingClientRect();
    const stickRect = stickman.getBoundingClientRect();
    const finishRect = finishFlag.getBoundingClientRect();

    // If for some reason bounding rects are invalid, fall back to safe defaults
    const trackWidth = (trackRect && trackRect.width) ? trackRect.width : track.offsetWidth || 600;
    const stickWidth = (stickRect && stickRect.width) ? stickRect.width : (origPixelWidth || 200);
    const finishLeftPx = (finishRect && typeof finishRect.left === "number") ? finishRect.left : (trackRect.left + trackWidth - 100);

    // compute startX relative to track left
    let startX = (stickRect && trackRect) ? (stickRect.left - trackRect.left) : 0;
    if (!isFinite(startX) || isNaN(startX)) startX = 0;

    // compute finishX relative to track left (stop so stickman doesn't overlap flag)
    let finishX = (finishLeftPx - (trackRect ? trackRect.left : 0)) - stickWidth;
    finishX += 150;
    if (!isFinite(finishX) || isNaN(finishX)) finishX = Math.max(0, trackWidth - stickWidth);

    // clamp finishX between 0 and trackWidth - stickWidth
    const maxFinish = Math.max(0, trackWidth - stickWidth);
    if (finishX < 0) finishX = 0;

    // clamp startX as well
    if (startX < 0) startX = 0;
    if (startX > maxFinish) startX = Math.min(startX, maxFinish);

    // Place stickman instantly at the computed startX (no transition)
    stickman.style.transition = "none";
    stickman.style.left = Math.round(startX) + "px";

    requestAnimationFrame(() => {
      // begin the movement using CSS transition on left
      stickman.style.transition = `left ${animationTime}s linear`;

      // set the target
      stickman.style.left = Math.round(finishX) + "px";

      // schedule reset after run + 1 second buffer
      resetTimer = setTimeout(() => {
        try {
          // stop transition and snap back to start
          stickman.style.transition = "none";
          stickman.style.left = Math.round(startX) + "px";

          if (original.src) stickman.src = original.src;
          stickman.style.left = original.left || "";
          stickman.style.right = original.right || "";
          stickman.style.top = original.top || "";
          stickman.style.position = original.position || "";
          stickman.style.height = original.height || "";
          stickman.style.width = original.width || "";
          stickman.style.transition = original.transition || "";

        } catch (e) {
          console.error("Error restoring stickman state:", e);
        } finally {
          running = false;
        }
      }, Math.round(animationTime * 1000) + 100);
    });
  });
})();
</script>



</div>

<footer class ="footer">
    <pre style="color:white">author: Michael D'Andrea                phone number:636-686-8622                    ©2025 Michaels Amazing Website                       mdandrea2006@gmail.com   </pre>
</footer>
</body>
</html>